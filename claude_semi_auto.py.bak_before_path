#!/usr/bin/env python3
"""
Claude.ai ë°˜ìë™í™” ë„êµ¬
ë…¸ì…˜ì˜ ê´€ì‹¬ ê¸°ì‚¬ë¥¼ í”„ë¡¬í”„íŠ¸ë¡œ ë³€í™˜í•˜ì—¬ í´ë¦½ë³´ë“œì— ë³µì‚¬
"""
import json
import pyperclip
import os
from datetime import datetime

def load_pending_articles():
    """ëŒ€ê¸° ì¤‘ì¸ ê¸°ì‚¬ ë¡œë“œ"""
    with open('pending_cardnews.json', 'r', encoding='utf-8') as f:
        return json.load(f)

def generate_claude_prompt(article):
    """Claude.aiìš© í”„ë¡¬í”„íŠ¸ ìƒì„±"""
    title = article['title']
    keywords = ', '.join(article.get('keywords', []))
    content = article.get('content', '')
    
    prompt = f"""ë‹¹ì‹ ì€ ì „ë ¥ ì‚°ì—… ì „ë¬¸ ì¹´ë“œë‰´ìŠ¤ ë””ìì´ë„ˆì…ë‹ˆë‹¤. ì•„ë˜ ê¸°ì‚¬ë¥¼ ë°”íƒ•ìœ¼ë¡œ Enhanced ìŠ¤íƒ€ì¼ì˜ 5í˜ì´ì§€ ì¹´ë“œë‰´ìŠ¤ë¥¼ HTMLë¡œ ë§Œë“¤ì–´ì£¼ì„¸ìš”.

[Enhanced ìŠ¤íƒ€ì¼ ê°€ì´ë“œ]
1. Pretendard í°íŠ¸ ì‚¬ìš© (font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif)
2. 5ê°œ ì„¹ì…˜ êµ¬ì¡°: 
   - ì„¹ì…˜ 1: í•µì‹¬ ì¸ì‚¬ì´íŠ¸ (ëˆˆê¸¸ì„ ë„ëŠ” í—¤ë“œë¼ì¸ + 3ì¤„ í•µì‹¬ ìš”ì•½)
   - ì„¹ì…˜ 2: ì£¼ìš” í†µê³„/ìˆ˜ì¹˜ (ì¸í¬ê·¸ë˜í”½, ì°¨íŠ¸)
   - ì„¹ì…˜ 3: íƒ€ì„ë¼ì¸/ë°œì „ ê³¼ì • (ì‹œê°ì  íƒ€ì„ë¼ì¸)
   - ì„¹ì…˜ 4: ì „ë¬¸ê°€ ì˜ê²¬/ì‹œì‚¬ì  (ì¸ìš©êµ¬ ìŠ¤íƒ€ì¼)
   - ì„¹ì…˜ 5: ë¯¸ë˜ ì „ë§/ê²°ë¡  (í–¥í›„ ì „ë§ê³¼ CTA)

3. ì¹´í…Œê³ ë¦¬ë³„ ìƒ‰ìƒ í…Œë§ˆ:
   - ì¬ìƒì—ë„ˆì§€/íƒœì–‘ê´‘/í’ë ¥: #10B981 (ê·¸ë¦°)
   - VPP/ì „ë ¥ì¤‘ê°œ: #06B6D4 (ë¯¼íŠ¸)
   - ESS/ì „ë ¥ì €ì¥: #8B5CF6 (í¼í”Œ)
   - ì „ë ¥ì‹œì¥/ì •ì±…: #3B82F6 (ë¸”ë£¨)
   - ì „ë ¥ë§/ì¸í”„ë¼: #1E40AF (ë„¤ì´ë¹„)

4. í•„ìˆ˜ í¬í•¨ ìš”ì†Œ:
   - í’ë¶€í•œ CSS ì• ë‹ˆë©”ì´ì…˜ (fade-in, slide-up, count-up ë“±)
   - Chart.jsë¥¼ í™œìš©í•œ ë°ì´í„° ì‹œê°í™”
   - ë°˜ì‘í˜• ë””ìì¸
   - ê³ í’ˆì§ˆ ê·¸ë˜ë””ì–¸íŠ¸ì™€ ê·¸ë¦¼ì íš¨ê³¼
   - ì¸í„°ë™í‹°ë¸Œ í˜¸ë²„ íš¨ê³¼

[ê¸°ì‚¬ ì •ë³´]
ì œëª©: {title}
í‚¤ì›Œë“œ: {keywords}

ë‚´ìš©:
{content}

ìœ„ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì™„ì „í•œ HTML íŒŒì¼ì„ ìƒì„±í•´ì£¼ì„¸ìš”. 
- ëª¨ë“  CSSëŠ” <style> íƒœê·¸ ë‚´ì—
- ëª¨ë“  JavaScriptëŠ” <script> íƒœê·¸ ë‚´ì—
- Chart.js CDN ë§í¬ í¬í•¨
- Pretendard í°íŠ¸ CDN ë§í¬ í¬í•¨
- í•œê¸€ ì£¼ì„ í¬í•¨"""
    
    return prompt

def main():
    """ë©”ì¸ ì‹¤í–‰ í•¨ìˆ˜"""
    articles = load_pending_articles()
    
    if not articles:
        print("âŒ ëŒ€ê¸° ì¤‘ì¸ ê¸°ì‚¬ê°€ ì—†ìŠµë‹ˆë‹¤.")
        return
    
    print("ğŸ“° ëŒ€ê¸° ì¤‘ì¸ ê¸°ì‚¬ ëª©ë¡:")
    for i, article in enumerate(articles):
        print(f"{i+1}. {article['title']}")
    
    choice = input("\ní”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•  ê¸°ì‚¬ ë²ˆí˜¸ë¥¼ ì„ íƒí•˜ì„¸ìš” (0: ì „ì²´): ")
    
    if choice == '0':
        # ì „ì²´ ê¸°ì‚¬ í”„ë¡¬í”„íŠ¸ ìƒì„±
        print("\nâš ï¸  ì „ì²´ ê¸°ì‚¬ëŠ” ê°œë³„ì ìœ¼ë¡œ Claude.aiì— ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.")
        for i, article in enumerate(articles):
            prompt = generate_claude_prompt(article)
            filename = f"claude_prompt_{i+1}.txt"
            with open(filename, 'w', encoding='utf-8') as f:
                f.write(prompt)
            print(f"âœ… {filename} ìƒì„± ì™„ë£Œ")
    else:
        # ì„ íƒí•œ ê¸°ì‚¬ í”„ë¡¬í”„íŠ¸ ìƒì„±
        idx = int(choice) - 1
        if 0 <= idx < len(articles):
            article = articles[idx]
            prompt = generate_claude_prompt(article)
            
            # í´ë¦½ë³´ë“œì— ë³µì‚¬
            try:
                pyperclip.copy(prompt)
                print("\nâœ… í”„ë¡¬í”„íŠ¸ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!")
                print("ğŸŒ https://claude.ai ì—ì„œ ë¶™ì—¬ë„£ê¸°(Ctrl+V) í•˜ì„¸ìš”.")
            except:
                # í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨ ì‹œ íŒŒì¼ë¡œ ì €ì¥
                filename = f"claude_prompt_{datetime.now().strftime('%Y%m%d_%H%M%S')}.txt"
                with open(filename, 'w', encoding='utf-8') as f:
                    f.write(prompt)
                print(f"\nâœ… í”„ë¡¬í”„íŠ¸ê°€ {filename}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.")
            
            print(f"\nğŸ“‹ ìƒì„±ëœ ì¹´ë“œë‰´ìŠ¤ ì €ì¥ ë°©ë²•:")
            print(f"1. Claude.aiì—ì„œ HTML ìƒì„± í›„ ë³µì‚¬")
            print(f"2. íŒŒì¼ëª…: detail_{article['title'].replace(' ', '_')}.html")
            print(f"3. ì €ì¥ ìœ„ì¹˜: /home/zwtiger/AI-Agent-Full-Stack-Developer/detailed/")

if __name__ == "__main__":
    main()
