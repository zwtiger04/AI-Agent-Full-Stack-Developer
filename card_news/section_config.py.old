"""
ì „ë ¥ì‚°ì—… ì¹´ë“œë‰´ìŠ¤ ì„¹ì…˜ ì„¤ì •
ê° ì„¹ì…˜ë³„ ì •ì˜, íŠ¸ë¦¬ê±° ë‹¨ì–´, ìŠ¤íƒ€ì¼ ì„¤ì •
"""
from typing import Dict, List, Optional

class SectionConfig:
    """ì„¹ì…˜ ì„¤ì • í´ë˜ìŠ¤"""
    
    # í•„ìˆ˜ ì„¹ì…˜ ì •ì˜
    REQUIRED_SECTIONS = {
        1: {
            'title': 'íƒ€ì´í‹€/ì„œë¡ ',
            'description': 'ì¹´ë“œë‰´ìŠ¤ì˜ ì‹œì‘, ì£¼ì œ ì†Œê°œ',
            'position': 'first',
            'style': 'title-intro'
        },
        5: {
            'title': 'ì „ë¬¸ê°€ ì˜ê²¬/ì‹œì‚¬ì ',
            'description': 'ì „ë¬¸ê°€ ì˜ê²¬ê³¼ ë¯¸ë˜ ì‹œì‚¬ì ',
            'position': 'last',
            'style': 'expert-opinion'
        }
    }
    
    # ì„ íƒ ê°€ëŠ¥í•œ 10ê°œ ì„¹ì…˜ ì •ì˜
    OPTIONAL_SECTIONS = {
        'background': {
            'id': 'background',
            'title': 'ë°°ê²½ ì„¤ëª…',
            'description': 'ê¸°ìˆ ì /ì •ì±…ì  ë°°ê²½ ì„¤ëª…',
            'trigger_words': ['ë°°ê²½', 'ì—­ì‚¬', 'ë°œì „', 'ë„ì…', 'ì‹œì‘', 'ê¸°ì›', 'íƒ„ìƒ', 'ê³¼ê±°'],
            'min_items': 3,
            'max_items': 5,
            'style': 'background-section',
            'icon': 'ğŸ“š'
        },
        'technical': {
            'id': 'technical',
            'title': 'ê¸°ìˆ  ìƒì„¸',
            'description': 'ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­ ì„¤ëª…',
            'trigger_words': ['ê¸°ìˆ ', 'ì‹œìŠ¤í…œ', 'ë©”ì»¤ë‹ˆì¦˜', 'ì›ë¦¬', 'êµ¬ì¡°', 'ì„¤ê³„', 'AI', 'ì•Œê³ ë¦¬ì¦˜', 'íš¨ìœ¨', 'kW', 'MW', 'GW'],
            'min_items': 3,
            'max_items': 6,
            'style': 'technical-section',
            'icon': 'âš™ï¸'
        },
        'comparison': {
            'id': 'comparison',
            'title': 'ë¹„êµ ë¶„ì„',
            'description': 'êµ­ë‚´ì™¸ ì‚¬ë¡€ ë¹„êµ, ê¸°ìˆ /ì •ì±… ë¹„êµ',
            'trigger_words': ['ë¹„êµ', 'ëŒ€ë¹„', 'ì°¨ì´', 'ìš°ìœ„', 'ê²½ìŸ', 'ì„ ì§„êµ­', 'í•´ì™¸', 'êµ­ë‚´ì™¸', 'vs'],
            'min_items': 2,
            'max_items': 4,
            'style': 'comparison-section',
            'icon': 'ğŸ“Š'
        },
        'statistics': {
            'id': 'statistics',
            'title': 'í†µê³„/í˜„í™©',
            'description': 'ìˆ˜ì¹˜ ë°ì´í„° ë° í˜„í™© ì •ë³´',
            'trigger_words': ['í†µê³„', 'í˜„í™©', 'ìˆ˜ì¹˜', 'ë°ì´í„°', '%', 'ì¦ê°€', 'ê°ì†Œ', 'ê·œëª¨', 'ìš©ëŸ‰', 'ë°œì „ëŸ‰'],
            'min_items': 3,
            'max_items': 5,
            'style': 'statistics-section',
            'icon': 'ğŸ“ˆ'
        },
        'benefits': {
            'id': 'benefits',
            'title': 'ê¸°ëŒ€ íš¨ê³¼',
            'description': 'ë„ì…/ì ìš© ì‹œ ê¸°ëŒ€ë˜ëŠ” íš¨ê³¼',
            'trigger_words': ['íš¨ê³¼', 'ì´ì ', 'ì¥ì ', 'í˜œíƒ', 'ê°œì„ ', 'í–¥ìƒ', 'ì ˆê°', 'ìˆ˜ìµ', 'ê²½ì œì„±'],
            'min_items': 3,
            'max_items': 5,
            'style': 'benefits-section',
            'icon': 'âœ¨'
        },
        'challenges': {
            'id': 'challenges',
            'title': 'ë„ì „ ê³¼ì œ',
            'description': 'í•´ê²°í•´ì•¼ í•  ë¬¸ì œì ê³¼ ê³¼ì œ',
            'trigger_words': ['ë¬¸ì œ', 'ê³¼ì œ', 'ë„ì „', 'ìš°ë ¤', 'ë¦¬ìŠ¤í¬', 'ì¥ì• ', 'í•œê³„', 'ì–´ë ¤ì›€', 'ì œì•½'],
            'min_items': 3,
            'max_items': 5,
            'style': 'challenges-section',
            'icon': 'ğŸ¯'
        },
        'timeline': {
            'id': 'timeline',
            'title': 'ì¶”ì§„ ì¼ì •',
            'description': 'ë‹¨ê³„ë³„ ì¶”ì§„ ê³„íš ë° ì¼ì •',
            'trigger_words': ['ì¼ì •', 'ê³„íš', 'ë¡œë“œë§µ', 'ë‹¨ê³„', 'ë…„ë„', '2025', '2030', 'í–¥í›„', 'ì˜ˆì •'],
            'min_items': 3,
            'max_items': 6,
            'style': 'timeline-section',
            'icon': 'ğŸ“…'
        },
        'stakeholders': {
            'id': 'stakeholders',
            'title': 'ì£¼ìš” ì°¸ì—¬ì',
            'description': 'ê´€ë ¨ ê¸°ì—…, ê¸°ê´€, ì´í•´ê´€ê³„ì',
            'trigger_words': ['ê¸°ì—…', 'ì—…ì²´', 'ê¸°ê´€', 'ì •ë¶€', 'í˜‘íšŒ', 'ì°¸ì—¬ì', 'ì£¼ì²´', 'í”Œë ˆì´ì–´', 'ê´€ê³„ì'],
            'min_items': 3,
            'max_items': 5,
            'style': 'stakeholders-section',
            'icon': 'ğŸ‘¥'
        },
        'process': {
            'id': 'process',
            'title': 'ì¶”ì§„ ì ˆì°¨',
            'description': 'ë‹¨ê³„ë³„ ì§„í–‰ í”„ë¡œì„¸ìŠ¤',
            'trigger_words': ['ì ˆì°¨', 'ê³¼ì •', 'í”„ë¡œì„¸ìŠ¤', 'ë‹¨ê³„', 'ë°©ë²•', 'ì§„í–‰', 'ì¶”ì§„', 'ì‹¤í–‰'],
            'min_items': 3,
            'max_items': 6,
            'style': 'process-section',
            'icon': 'ğŸ”„'
        },
        'policy': {
            'id': 'policy',
            'title': 'ì •ì±…/ê·œì œ',
            'description': 'ê´€ë ¨ ì •ì±… ë° ê·œì œ ì‚¬í•­',
            'trigger_words': ['ì •ì±…', 'ê·œì œ', 'ë²•ì•ˆ', 'ì œë„', 'ì§€ì›', 'ì¸ì„¼í‹°ë¸Œ', 'ë³´ì¡°ê¸ˆ', 'ì„¸ì œ', 'ê¸°ì¤€'],
            'min_items': 3,
            'max_items': 5,
            'style': 'policy-section',
            'icon': 'ğŸ“‹'
        }
    }
    
    # ì„¹ì…˜ë³„ ìƒ‰ìƒ í…Œë§ˆ
    SECTION_COLORS = {
        'background-section': '#2C3E50',      # ì§„í•œ ì²­íšŒìƒ‰
        'technical-section': '#16A085',       # ì²­ë¡ìƒ‰
        'comparison-section': '#8E44AD',      # ë³´ë¼ìƒ‰
        'statistics-section': '#E74C3C',      # ë¹¨ê°„ìƒ‰
        'benefits-section': '#27AE60',        # ì´ˆë¡ìƒ‰
        'challenges-section': '#E67E22',      # ì£¼í™©ìƒ‰
        'timeline-section': '#3498DB',        # íŒŒë€ìƒ‰
        'stakeholders-section': '#F39C12',    # ê¸ˆìƒ‰
        'process-section': '#1ABC9C',         # ë¯¼íŠ¸ìƒ‰
        'policy-section': '#34495E'           # ì–´ë‘ìš´ íšŒìƒ‰
    }
    
    
    @property
    def SECTIONS(self):
        """ëª¨ë“  ì„¹ì…˜ í†µí•© (í•˜ìœ„ í˜¸í™˜ì„±ì„ ìœ„í•œ í”„ë¡œí¼í‹°)"""
        return {**self.REQUIRED_SECTIONS, **self.OPTIONAL_SECTIONS}

    @classmethod
    def get_all_sections(cls) -> Dict:
        """ëª¨ë“  ì„¹ì…˜ ì •ë³´ ë°˜í™˜"""
        return {
            'required': cls.REQUIRED_SECTIONS,
            'optional': cls.OPTIONAL_SECTIONS,
            'colors': cls.SECTION_COLORS
        }
    
    @classmethod
    def get_section_by_id(cls, section_id: str) -> Optional[Dict]:
        """IDë¡œ ì„¹ì…˜ ì •ë³´ ì¡°íšŒ"""
        return cls.OPTIONAL_SECTIONS.get(section_id)
    
    @classmethod
    def get_trigger_words(cls, section_id: str) -> List[str]:
        """ì„¹ì…˜ë³„ íŠ¸ë¦¬ê±° ë‹¨ì–´ ë°˜í™˜"""
        section = cls.get_section_by_id(section_id)
        return section.get('trigger_words', []) if section else []
    
    @classmethod
    def get_section_style(cls, section_id: str) -> Dict[str, str]:
        """ì„¹ì…˜ë³„ ìŠ¤íƒ€ì¼ ì •ë³´ ë°˜í™˜"""
        section = cls.get_section_by_id(section_id)
        if not section:
            return {}
        
        style_class = section.get('style', '')
        color = cls.SECTION_COLORS.get(style_class, '#2C3E50')
        
        return {
            'class': style_class,
            'color': color,
            'icon': section.get('icon', 'ğŸ“„')
        }
